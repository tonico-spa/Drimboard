"use client";

import { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

// Register the ScrollTrigger plugin with GSAP
gsap.registerPlugin(ScrollTrigger);


const MainLogo = ({ styles }) => {
    const svgRef = useRef(null);

    useEffect(() => {
        if (svgRef.current) {
            const cls5Elements = svgRef.current.querySelectorAll('.cls-5');
            const faceElements = svgRef.current.querySelectorAll('.face');

            // Set initial state for faces - hidden and positioned to the left
            gsap.set(faceElements, {
                x: -100,
                opacity: 0
            });

            // Animate faces appearing one by one from the left with bounce
            faceElements.forEach((face, index) => {
                gsap.to(face, {
                    x: 0,
                    opacity: 1,
                    duration: 0.9,
                    ease: "back.out(1.7)",
                    delay: index * 0.15
                });
            });

            // Create independent blinking animation for each eye
            cls5Elements.forEach((element, index) => {
                const createBlinkTimeline = () => {
                    const timeline = gsap.timeline({ 
                        repeat: -1, 
                        repeatDelay: gsap.utils.random(2, 4) 
                    });
                    
                    // Random initial delay
                    timeline.to({}, { duration: gsap.utils.random(0, 2) })
                    // Quick blink
                    .to(element, {
                        scaleY: 0.1,
                        duration: 0.1,
                        ease: "power2.in",
                        transformOrigin: "center center"
                    })
                    .to(element, {
                        scaleY: 1,
                        duration: 0.1,
                        ease: "power2.out"
                    })
                    // Sometimes double blink
                    .to({}, { 
                        duration: Math.random() > 0.7 ? 0.2 : 0,
                        onComplete: () => {
                            if (Math.random() > 0.7) {
                                gsap.to(element, {
                                    scaleY: 0.1,
                                    duration: 0.1,
                                    ease: "power2.in",
                                    transformOrigin: "center center",
                                    onComplete: () => {
                                        gsap.to(element, {
                                            scaleY: 1,
                                            duration: 0.1,
                                            ease: "power2.out"
                                        });
                                    }
                                });
                            }
                        }
                    });
                    
                    return timeline;
                };
                
                createBlinkTimeline();
            });
        }
    }, []);

    return (
        <div >
            <svg ref={svgRef} id="Capa_2" xmlns="http://www.w3.org/2000/svg" viewBox="0 -7 360 270">
                <defs>
                    <style>
                        {styles}
                    </style>
                </defs>
                <g id="portada">
                    <g>
                        <g className="face">
                            <rect className="cls-3" x="4.42" y="94.29" width="43.07" height="27.7" transform="translate(13.65 -2.39) rotate(7.14)" />
                            <path className="cls-4" d="M56.48,103.5c.21-1.86-.48-3.71-1.86-4.97l-4.36-3.98c-.88-.8-1.98-1.31-3.16-1.46l-3.09-.39c-.02-1.66-1.24-3.1-2.93-3.31l-2.92-.37c-1.68-.21-3.22.88-3.65,2.48l-12.02-1.51c-.01-1.67-1.24-3.12-2.93-3.33l-2.92-.37c-1.69-.21-3.23.89-3.66,2.5l-2.48-.31c-3.17-.4-6.06,1.87-6.46,5.07l-.38,3.04c-1.65.03-3.07,1.26-3.29,2.96l-.37,2.95c-.21,1.7.86,3.25,2.45,3.68l-1.01,8.05c-.24,1.89.45,3.78,1.85,5.05l4.36,3.98c.88.8,1.98,1.31,3.16,1.46l33.29,4.17c4.99.63,9.54-2.95,10.17-7.98l1.05-8.37c1.22-.39,2.17-1.45,2.34-2.81l.37-2.95c.17-1.36-.49-2.63-1.58-3.31ZM44.16,117.47c-.21,1.68-1.73,2.88-3.4,2.67l-32.12-4.03c-1.67-.21-2.85-1.74-2.64-3.43l2.21-17.67c.21-1.68,1.73-2.88,3.4-2.67l32.12,4.03c1.67.21,2.85,1.74,2.64,3.43l-2.21,17.67Z" />
                            <g>
                                <path className="cls-5" d="M14.26,104.75c.34-2.67,2.75-4.57,5.4-4.24s4.52,2.77,4.19,5.44" />
                                <path className="cls-5" d="M28.53,106.54c.34-2.67,2.75-4.57,5.4-4.24s4.52,2.77,4.19,5.44" />
                            </g>
                        </g>
                        <path className="cls-4" d="M96.86,155.94l-.76-7.61h-.27c-3.64,5.72-9.79,8.89-18.07,8.84-17.49-.1-30.22-14.05-30.12-33.01.11-18.96,13-32.77,30.48-32.67,6.27.03,11.34,1.93,15.05,5.42h.27s.17-30.87.17-30.87c.01-1.97,1.62-3.55,3.58-3.54l14.23.08c1.97.01,3.55,1.62,3.54,3.58l-.48,86.31c-.01,1.97-1.62,3.55-3.58,3.54l-14.06-.08ZM93.83,124.42c.05-8.28-4.86-13.91-12.2-13.95-7.34-.04-12.31,5.54-12.36,13.82-.05,8.27,4.86,13.91,12.2,13.95,7.34.04,12.31-5.54,12.36-13.81Z" />
                        <path className="cls-4" d="M171.93,94.42l-.12,20.69h-.8c-2.53-1.75-6.13-2.84-10-2.86-9.75-.05-13.91,5.4-13.98,17.94l-.13,22.47c-.01,1.97-1.62,3.55-3.58,3.54l-14.23-.08c-1.97-.01-3.55-1.62-3.54-3.58l.31-55.88c.01-1.97,1.62-3.55,3.58-3.54l14.06.08,1.01,10.02h.27c3.38-7.59,9.14-11.3,18.08-11.25,3.87.02,7.34.98,9.06,2.45Z" />
                        <path className="cls-4" d="M205.88,74.43c-.04,7.47-5.28,12.65-12.75,12.61-7.47-.04-12.65-5.28-12.61-12.75s5.28-12.65,12.75-12.61c7.48.04,12.65,5.28,12.61,12.75ZM185.98,93.54l14.23.08c1.97.01,3.55,1.62,3.54,3.58l-.31,55.88c-.01,1.97-1.62,3.55-3.58,3.54l-14.23-.08c-1.97-.01-3.55-1.62-3.54-3.58l.31-55.88c.01-1.97,1.62-3.55,3.58-3.54Z" />
                        <path className="cls-4" d="M311.42,119.47l-.19,34.21c-.01,1.97-1.62,3.55-3.58,3.54l-14.23-.08c-1.97-.01-3.55-1.62-3.54-3.58l.18-31.68c.04-6.67-2.75-10.16-7.69-10.19-5.87-.03-8.83,3.82-8.88,13.03l-.16,28.74c-.01,1.97-1.62,3.55-3.58,3.54l-14.23-.08c-1.97-.01-3.55-1.62-3.54-3.58l.18-31.68c.04-6.67-2.75-10.16-7.69-10.19-5.87-.03-8.83,3.82-8.87,11.3l-.17,30.48c-.01,1.97-1.62,3.55-3.58,3.54l-14.23-.08c-1.97-.01-3.55-1.62-3.54-3.58l.31-55.88c.01-1.97,1.62-3.55,3.58-3.54l14.06.08.75,8.01h.27c3.37-5.99,9.26-9.29,17.4-9.25,7.88.04,14.13,3.42,18.1,9.45h.27c3.77-6.12,9.8-9.29,19.54-9.24,14.68.08,23.17,9.87,23.08,26.69Z" />
                        <path className="cls-4" d="M80.15,202.47c-.11,18.95-13,32.77-30.48,32.67-8.28-.05-14.4-3.28-17.97-9.04h-.27s-.84,7.6-.84,7.6l-14.06-.08c-1.97-.01-3.55-1.62-3.54-3.58l.48-86.31c.01-1.97,1.62-3.55,3.58-3.54l14.23.08c1.97.01,3.55,1.62,3.54,3.58l-.17,30.88h.27c3.76-3.45,8.84-5.29,15.11-5.25,17.49.1,30.22,14.05,30.12,33.01ZM58.53,202.35c.05-8.28-4.86-13.91-12.2-13.95-7.34-.04-12.31,5.54-12.36,13.82s4.86,13.91,12.21,13.95c7.34.04,12.31-5.54,12.36-13.81Z" />
                        <path className="cls-4" d="M151.4,200.95c-.11,19.22-14.2,32.76-34.09,32.65-19.89-.11-33.83-13.8-33.72-33.03.11-19.22,14.2-32.76,34.09-32.65,19.89.11,33.83,13.8,33.72,33.03ZM105.22,200.69c-.05,8.27,4.86,13.91,12.2,13.95,7.34.04,12.31-5.54,12.36-13.81.05-8.28-4.86-13.91-12.2-13.95-7.34-.04-12.31,5.54-12.36,13.82Z" />
                        <path className="cls-4" d="M205.98,232.76l-.76-7.61h-.27c-3.64,5.72-9.79,8.89-18.07,8.84-17.49-.1-30.22-14.05-30.12-33.01.11-18.96,13-32.77,30.48-32.67,8.28.05,14.4,3.28,17.97,9.05h.27s.84-7.6.84-7.6l14.06.08c1.97.01,3.55,1.62,3.54,3.58l-.31,55.88c-.01,1.97-1.62,3.55-3.58,3.54l-14.06-.08ZM202.96,201.24c.05-8.28-4.86-13.91-12.2-13.95-7.34-.04-12.31,5.54-12.36,13.82-.05,8.27,4.86,13.91,12.2,13.95,7.34.04,12.31-5.54,12.36-13.81Z" />
                        <path className="cls-4" d="M278.76,171.22l-.12,20.69h-.8c-2.53-1.75-6.13-2.84-10-2.86-9.75-.05-13.91,5.4-13.98,17.94l-.14,26.03-17.8-.1c-1.97-.01-3.55-1.62-3.54-3.58l.31-55.88c.01-1.97,1.62-3.55,3.58-3.54l14.06.08,1.01,10.02h.27c3.38-7.59,9.14-11.3,18.08-11.25,3.87.02,7.34.98,9.06,2.45Z" />
                        <path className="cls-4" d="M332.75,233.46l-.76-7.61h-.27c-3.64,5.72-9.79,8.89-18.07,8.84-17.49-.1-30.22-14.05-30.12-33.01.11-18.96,13-32.77,30.48-32.67,6.27.03,11.34,1.93,15.05,5.42h.27s.17-30.87.17-30.87c.01-1.97,1.62-3.55,3.58-3.54l14.23.08c1.97.01,3.55,1.62,3.54,3.58l-.48,86.31c-.01,1.97-1.62,3.55-3.58,3.54l-14.06-.08ZM329.72,201.94c.05-8.28-4.86-13.91-12.2-13.95-7.34-.04-12.31,5.54-12.36,13.82-.05,8.27,4.86,13.91,12.2,13.95,7.34.04,12.31-5.54,12.36-13.81Z" />
                        <rect className="cls-2" x="50.39" y="-13.71" width="270.21" height="337.5" transform="translate(8.59 319.82) rotate(-82.86)" />
                        <g className="face">
                            <rect className="cls-3" x="260.05" y="218.95" width="41.48" height="26.62" transform="translate(31.07 -33.12) rotate(7.14)" />
                            <path className="cls-4" d="M309.96,229.88c.2-1.79-.46-3.57-1.78-4.78l-4.19-3.82c-.84-.77-1.91-1.26-3.04-1.4l-2.97-.37c-.02-1.6-1.19-2.98-2.81-3.18l-2.81-.35c-1.62-.2-3.09.84-3.51,2.39l-11.55-1.45c-.01-1.61-1.19-3-2.81-3.2l-2.81-.35c-1.62-.2-3.1.85-3.51,2.41l-2.38-.3c-3.05-.38-5.83,1.8-6.21,4.88l-.37,2.92c-1.58.03-2.95,1.21-3.16,2.85l-.35,2.83c-.2,1.63.83,3.12,2.36,3.54l-.97,7.74c-.23,1.82.44,3.63,1.78,4.85l4.19,3.82c.84.77,1.91,1.26,3.04,1.4l31.99,4.01c4.79.6,9.17-2.83,9.78-7.67l1.01-8.04c1.17-.37,2.08-1.4,2.25-2.7l.35-2.83c.16-1.31-.47-2.53-1.52-3.18ZM298.12,243.3c-.2,1.62-1.67,2.77-3.27,2.57l-30.86-3.87c-1.6-.2-2.74-1.68-2.53-3.29l2.13-16.98c.2-1.62,1.67-2.77,3.27-2.57l30.86,3.87c1.6.2,2.74,1.68,2.54,3.29l-2.13,16.98Z" />
                            <g>
                                <path className="cls-5" d="M278.6,232.23c-.32,2.57-2.65,4.39-5.19,4.07s-4.35-2.66-4.03-5.23" />
                                <path className="cls-5" d="M292.31,233.95c-.32,2.57-2.65,4.39-5.19,4.07s-4.35-2.66-4.03-5.23" />
                            </g>
                        </g>
                        <g className="face">
                            <rect className="cls-3" x="315.51" y="113.18" width="35.55" height="20.63" transform="translate(17.95 -40.49) rotate(7.14)" />
                            <g>
                                <g>
                                    <circle className="cls-5" cx="327.53" cy="122.19" r="3.71" />
                                    <circle className="cls-5" cx="338.47" cy="123.56" r="3.71" />
                                </g>
                                <path className="cls-4" d="M356.24,120.82c.16-1.42-.37-2.82-1.43-3.78l-3.34-3.03c-.68-.61-1.52-1-2.43-1.11l-2.37-.3c-.02-1.26-.96-2.36-2.25-2.52l-2.24-.28c-1.29-.16-2.47.66-2.8,1.89l-9.22-1.16c-.01-1.27-.95-2.37-2.25-2.53l-2.24-.28c-1.3-.16-2.48.67-2.8,1.9l-1.9-.24c-2.43-.3-4.65,1.42-4.95,3.85l-.29,2.31c-1.26.02-2.36.96-2.52,2.25l-.28,2.24c-.16,1.29.66,2.47,1.89,2.8l-.77,6.12c-.18,1.44.35,2.87,1.43,3.84l3.34,3.03c.68.61,1.52,1,2.43,1.11l25.54,3.2c3.83.48,7.32-2.23,7.8-6.06l.8-6.36c.93-.29,1.66-1.1,1.79-2.14l.28-2.24c.13-1.04-.38-2-1.21-2.52ZM346.8,131.43c-.16,1.28-1.33,2.19-2.61,2.03l-24.64-3.09c-1.28-.16-2.19-1.33-2.03-2.61l1.68-13.43c.16-1.28,1.33-2.19,2.61-2.03l24.64,3.09c1.28.16,2.19,1.33,2.03,2.61l-1.68,13.43Z" />

                            </g>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
    );
}
export default MainLogo